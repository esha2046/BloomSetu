NCERT_REFS = {
    # Class 10 Science
    "Physics_10": {
        "Light Reflection and Refraction": {"pages": "168-198", "key_figs": ["10.1", "10.5", "10.9"]},
        "Human Eye": {"pages": "190-204", "key_figs": ["11.1", "11.3", "11.6"]},
        "Electricity": {"pages": "200-223", "key_figs": ["12.1", "12.5", "12.8"]},
        "Magnetic Effects of Electric Current": {"pages": "224-244", "key_figs": ["13.1", "13.7", "13.12"]},
        "Sources of Energy": {"pages": "245-262", "key_figs": ["14.1", "14.5"]}
    },
    "Chemistry_10": {
        "Chemical Reactions and Equations": {"pages": "1-19", "key_figs": ["1.1", "1.3", "1.8"]},
        "Acids Bases and Salts": {"pages": "18-38", "key_figs": ["2.1", "2.4", "2.9"]},
        "Metals and Non-metals": {"pages": "40-62", "key_figs": ["3.1", "3.6", "3.11"]},
        "Carbon and its Compounds": {"pages": "61-85", "key_figs": ["4.1", "4.8", "4.13"]},
        "Periodic Classification of Elements": {"pages": "81-96", "key_figs": ["5.1", "5.3", "5.8"]}
    },
    "Biology_10": {
        "Life Processes": {"pages": "95-122", "key_figs": ["6.1", "6.6", "6.13"]},
        "Control and Coordination": {"pages": "119-138", "key_figs": ["7.1", "7.3", "7.7"]},
        "How Do Organisms Reproduce": {"pages": "128-147", "key_figs": ["8.1", "8.5", "8.9"]},
        "Heredity and Evolution": {"pages": "143-162", "key_figs": ["9.1", "9.5", "9.11"]},
        "Our Environment": {"pages": "258-268", "key_figs": ["15.1", "15.4"]},
        "Management of Natural Resources": {"pages": "265-283", "key_figs": ["16.1", "16.3"]}
    },
    "Mathematics_10": {
        "Real Numbers": {"pages": "1-17", "key_figs": []},
        "Polynomials": {"pages": "28-43", "key_figs": ["2.1", "2.3"]},
        "Pair of Linear Equations": {"pages": "44-75", "key_figs": ["3.1", "3.4"]},
        "Quadratic Equations": {"pages": "73-94", "key_figs": []},
        "Arithmetic Progressions": {"pages": "95-119", "key_figs": []},
        "Triangles": {"pages": "121-152", "key_figs": ["6.1", "6.8", "6.14"]},
        "Coordinate Geometry": {"pages": "161-180", "key_figs": ["7.1", "7.5"]},
        "Trigonometry": {"pages": "181-200", "key_figs": ["8.1", "8.4"]},
        "Circles": {"pages": "213-238", "key_figs": ["10.1", "10.5"]},
        "Surface Areas and Volumes": {"pages": "245-275", "key_figs": ["13.1", "13.9"]}
    },
    
    # Class 11 Science
    "Physics_11": {
        "Physical World": {"pages": "2-9", "key_figs": ["1.1"]},
        "Units and Measurements": {"pages": "10-35", "key_figs": ["2.1", "2.3", "2.5"]},
        "Motion in a Straight Line": {"pages": "36-63", "key_figs": ["3.2", "3.7", "3.12"]},
        "Motion in a Plane": {"pages": "64-91", "key_figs": ["4.1", "4.6", "4.11"]},
        "Laws of Motion": {"pages": "92-125", "key_figs": ["5.1", "5.8", "5.14"]},
        "Work Energy and Power": {"pages": "126-153", "key_figs": ["6.1", "6.5", "6.10"]},
        "Gravitation": {"pages": "178-207", "key_figs": ["8.1", "8.7", "8.12"]},
        "Thermodynamics": {"pages": "286-317", "key_figs": ["12.1", "12.8"]},
        "Oscillations": {"pages": "339-367", "key_figs": ["14.1", "14.7", "14.15"]},
        "Waves": {"pages": "368-403", "key_figs": ["15.1", "15.9", "15.18"]}
    },
    "Chemistry_11": {
        "Some Basic Concepts of Chemistry": {"pages": "1-28", "key_figs": ["1.1", "1.3"]},
        "Structure of Atom": {"pages": "29-58", "key_figs": ["2.1", "2.8", "2.12"]},
        "Classification of Elements": {"pages": "84-110", "key_figs": ["3.1", "3.4", "3.9"]},
        "Chemical Bonding": {"pages": "111-150", "key_figs": ["4.1", "4.8", "4.15"]},
        "Thermodynamics": {"pages": "168-196", "key_figs": ["6.1", "6.5", "6.10"]},
        "Equilibrium": {"pages": "197-226", "key_figs": ["7.1", "7.4", "7.9"]},
        "Redox Reactions": {"pages": "227-250", "key_figs": ["8.1", "8.3"]},
        "Organic Chemistry Basics": {"pages": "357-387", "key_figs": ["12.1", "12.6"]},
        "Hydrocarbons": {"pages": "388-418", "key_figs": ["13.1", "13.5", "13.12"]}
    },
    "Biology_11": {
        "The Living World": {"pages": "1-15", "key_figs": ["1.1", "1.2"]},
        "Biological Classification": {"pages": "16-35", "key_figs": ["2.1", "2.4", "2.8"]},
        "Plant Kingdom": {"pages": "36-61", "key_figs": ["3.1", "3.6", "3.12"]},
        "Animal Kingdom": {"pages": "62-95", "key_figs": ["4.1", "4.9", "4.18"]},
        "Cell The Unit of Life": {"pages": "127-147", "key_figs": ["8.1", "8.5", "8.8"]},
        "Biomolecules": {"pages": "148-168", "key_figs": ["9.1", "9.5", "9.10"]},
        "Photosynthesis": {"pages": "200-220", "key_figs": ["13.1", "13.5", "13.9"]},
        "Respiration in Plants": {"pages": "221-238", "key_figs": ["14.1", "14.5", "14.10"]}
    },
    "Mathematics_11": {
        "Sets": {"pages": "1-18", "key_figs": ["1.1", "1.2"]},
        "Relations and Functions": {"pages": "19-40", "key_figs": ["2.1", "2.5"]},
        "Trigonometric Functions": {"pages": "41-78", "key_figs": ["3.1", "3.4"]},
        "Complex Numbers": {"pages": "103-126", "key_figs": ["5.1", "5.3"]},
        "Permutations and Combinations": {"pages": "150-176", "key_figs": ["7.1"]},
        "Binomial Theorem": {"pages": "177-194", "key_figs": ["8.1"]},
        "Straight Lines": {"pages": "216-244", "key_figs": ["10.1", "10.8"]},
        "Conic Sections": {"pages": "245-275", "key_figs": ["11.1", "11.9"]},
        "Limits and Derivatives": {"pages": "294-332", "key_figs": ["13.1", "13.5"]}
    },
    
    # Class 12 Science
    "Physics_12": {
        "Electric Charges and Fields": {"pages": "1-30", "key_figs": ["1.1", "1.8", "1.15"]},
        "Electrostatic Potential": {"pages": "31-62", "key_figs": ["2.1", "2.6", "2.12"]},
        "Current Electricity": {"pages": "63-102", "key_figs": ["3.1", "3.8", "3.16"]},
        "Moving Charges and Magnetism": {"pages": "103-143", "key_figs": ["4.1", "4.10", "4.20"]},
        "Electromagnetic Induction": {"pages": "176-211", "key_figs": ["6.1", "6.8", "6.15"]},
        "Alternating Current": {"pages": "212-247", "key_figs": ["7.1", "7.6", "7.12"]},
        "Ray Optics": {"pages": "275-329", "key_figs": ["9.1", "9.15", "9.28"]},
        "Wave Optics": {"pages": "330-363", "key_figs": ["10.1", "10.8", "10.15"]},
        "Atoms": {"pages": "380-404", "key_figs": ["12.1", "12.5", "12.9"]},
        "Nuclei": {"pages": "405-441", "key_figs": ["13.1", "13.7", "13.14"]}
    },
    "Chemistry_12": {
        "The Solid State": {"pages": "1-30", "key_figs": ["1.1", "1.8", "1.14"]},
        "Solutions": {"pages": "31-56", "key_figs": ["2.1", "2.4", "2.8"]},
        "Electrochemistry": {"pages": "57-88", "key_figs": ["3.1", "3.6", "3.11"]},
        "Chemical Kinetics": {"pages": "89-120", "key_figs": ["4.1", "4.5", "4.10"]},
        "Coordination Compounds": {"pages": "234-260", "key_figs": ["9.1", "9.5", "9.10"]},
        "Haloalkanes and Haloarenes": {"pages": "285-325", "key_figs": ["10.1", "10.8"]},
        "Alcohols Phenols and Ethers": {"pages": "326-363", "key_figs": ["11.1", "11.6"]},
        "Aldehydes Ketones": {"pages": "364-395", "key_figs": ["12.1", "12.5"]},
        "Amines": {"pages": "421-445", "key_figs": ["13.1", "13.4"]},
        "Biomolecules": {"pages": "446-472", "key_figs": ["14.1", "14.8"]}
    },
    "Biology_12": {
        "Reproduction in Organisms": {"pages": "1-16", "key_figs": ["1.1", "1.5"]},
        "Sexual Reproduction in Flowering Plants": {"pages": "17-40", "key_figs": ["2.1", "2.8", "2.12"]},
        "Human Reproduction": {"pages": "41-63", "key_figs": ["3.1", "3.8", "3.12"]},
        "Principles of Inheritance": {"pages": "80-101", "key_figs": ["5.1", "5.6", "5.12"]},
        "Molecular Basis of Inheritance": {"pages": "102-128", "key_figs": ["6.1", "6.8", "6.15"]},
        "Evolution": {"pages": "129-150", "key_figs": ["7.1", "7.6", "7.12"]},
        "Human Health and Disease": {"pages": "151-174", "key_figs": ["8.1", "8.5", "8.9"]},
        "Biotechnology Principles": {"pages": "192-214", "key_figs": ["11.1", "11.5", "11.8"]},
        "Ecosystem": {"pages": "240-260", "key_figs": ["14.1", "14.5", "14.10"]},
        "Biodiversity and Conservation": {"pages": "261-283", "key_figs": ["15.1", "15.5"]}
    },
    "Mathematics_12": {
        "Relations and Functions": {"pages": "1-30", "key_figs": ["1.1", "1.5"]},
        "Inverse Trigonometric Functions": {"pages": "31-48", "key_figs": ["2.1"]},
        "Matrices": {"pages": "49-88", "key_figs": ["3.1", "3.5"]},
        "Determinants": {"pages": "89-128", "key_figs": ["4.1", "4.3"]},
        "Continuity and Differentiability": {"pages": "129-183", "key_figs": ["5.1", "5.8"]},
        "Applications of Derivatives": {"pages": "184-233", "key_figs": ["6.1", "6.10", "6.18"]},
        "Integrals": {"pages": "234-293", "key_figs": ["7.1", "7.5"]},
        "Differential Equations": {"pages": "318-349", "key_figs": ["9.1", "9.5"]},
        "Vector Algebra": {"pages": "350-384", "key_figs": ["10.1", "10.8"]},
        "Three Dimensional Geometry": {"pages": "385-420", "key_figs": ["11.1", "11.5"]},
        "Probability": {"pages": "441-479", "key_figs": ["13.1", "13.5"]}
    }
}

def get_ncert_reference(subject, class_level, chapter):
    """Get NCERT page reference for a chapter"""
    key = f"{subject}_{class_level}"
    if key in NCERT_REFS and chapter in NCERT_REFS[key]:
        ref = NCERT_REFS[key][chapter]
        parts = [f"ðŸ“– NCERT {subject} Class {class_level}"]
        parts.append(f"Chapter: {chapter}")
        if ref['pages']:
            parts.append(f"Pages {ref['pages']}")
        if ref['key_figs']:
            parts.append(f"Key Figures: {', '.join(ref['key_figs'][:3])}")
        return " | ".join(parts)
    return None